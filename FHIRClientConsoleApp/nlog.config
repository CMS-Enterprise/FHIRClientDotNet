<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      autoReload="true"
      throwExceptions="true"
      internalLogLevel="Warn"
      internalLogFile="logs/nlog-internal.log">

	<!-- Define variables -->
	<variable name="logDirectory" value="logs" />

	<targets>
		<!-- File target for application logs -->
		<target xsi:type="File"
				name="logfile"
				fileName="${basedir}/${logDirectory}/app-${shortdate}.log"
				archiveFileName="${basedir}/${logDirectory}/archives/app-{#}.log"
				archiveEvery="Day"
				archiveNumbering="Rolling"
				maxArchiveFiles="7"
				layout="${longdate} | ${level:uppercase=true} | ${callsite:className=true:methodName=true:includeSourcePath=false} | Line ${callsite-linenumber} | ${logger} | ${message}${onexception:inner=${newline}${exception:format=tostring}}" />
		
		<target name="logconsole" xsi:type="Console" 
				layout="${longdate} | ${level:uppercase=true} | ${callsite:className=true:methodName=true:includeSourcePath=false} | Line ${callsite-linenumber} | ${logger} | ${message}${onexception:inner=${newline}${exception:format=tostring}}"/>
	</targets>

	<rules>
		<!-- Log everything to file -->
		<logger name="*" minlevel="Info" writeTo="logfile, logconsole" />
	</rules>
</nlog>
